import{d as y,_ as I,c as i,a as $,u as e,b as c,n as u,F as h,r as f,t as p,o as r,e as w,f as C,g as S,h as m,i as B,w as x,j as A,k as D,l as V,P as N}from"./index-8c_mVFoi.js";function F(s,t=10){if(!Array.isArray(s))return;const d=Math.ceil(s.length/t),n=[];for(let a=0;a<d;a++)n.push({page:a+1,items:s.slice(a*t,(a+1)*t)});return n}const b=y("paginator",{state:()=>({allPages:[],currentPage:1}),getters:{getPageItems(){const s=this.allPages.find(t=>t.page===this.currentPage);return s?s.items:[]},totalPages(){return this.allPages.length}},actions:{setData(s,t=10){this.allPages=F(s,t),this.currentPage=1},setPage(s){s>=1&&s<=this.totalPages&&(this.currentPage=s)}}}),L={key:0,class:"pagination-card"},M=["aria-disabled"],j={class:"pagination-card__list pagination-card__list-dekstop"},z=["onClick"],E={class:"pagination-card__list-mobail"},q=["aria-disabled"],G={__name:"PaginationCard",setup(s){const t=b();return(d,n)=>e(t).totalPages?(r(),i("div",L,[c("div",{class:u(["pagination-card__button pagination-card__button--prev",{"pagination-card__button--disable":e(t).currentPage==1}]),onClick:n[0]||(n[0]=a=>e(t).setPage(e(t).currentPage-1)),role:"button","aria-label":"предыдущая страница","aria-disabled":e(t).currentPage===1}," < ",10,M),c("div",j,[(r(!0),i(h,null,f(e(t).totalPages,a=>(r(),i("div",{key:a,class:u(["pagination-card__list-item",{"pagination-card__list--active":a===e(t).currentPage}]),onClick:g=>e(t).setPage(a)},p(a),11,z))),128))]),c("div",E,p(`${e(t).currentPage}/${e(t).totalPages}`),1),c("div",{class:u(["pagination-card__button pagination-card__button--next",{"pagination-card__button--disable":e(t).currentPage===e(t).totalPages}]),onClick:n[1]||(n[1]=a=>e(t).setPage(e(t).currentPage+1)),role:"button","aria-label":"Следующая страница","aria-disabled":e(t).currentPage===e(t).totalPages}," > ",10,q)])):$("",!0)}},H=I(G,[["__scopeId","data-v-3b53376c"]]),J={class:"product-list-view"},K={class:"product-list-view__title"},O={class:"product-list-view__products"},Q={key:0,class:""},R={key:1,class:"product-list-view__empty"},U={__name:"ProductListView",setup(s){const t=b(),d=w(),n=C(),a=S();m([]);let g=m(!0);const _=B(()=>a.filtersItems);x(_,o=>{t.setData(o,4)},{immediate:!0}),A(async()=>{try{await a.setItems(),t.setData(a.getItems,4)}catch(o){console.error("Ошибка загрузки продуктов:",o)}finally{g.value=!1}});function v(o){let P=d.addItem(o);n.showInformation(P)}return(o,P)=>(r(),i("div",J,[c("h1",K," Список Продуктов ("+p(_.value.length)+") ",1),c("div",O,[e(g)?(r(),i("div",Q,"Загрузка...")):_.value.length===0?(r(),i("div",R," По вашему запросу ничего не найдено. ")):(r(!0),i(h,{key:2},f(e(t).getPageItems,(l,k)=>(r(),V(N,{key:k,title:l.title,rating:l.rating,price:l.price,img:l.images,item:l,onSelect:v},null,8,["title","rating","price","img","item"]))),128))]),D(H)]))}};export{U as default};
